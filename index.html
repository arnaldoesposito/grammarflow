<!DOCTYPE html>
<html lang="en">
<!-- 
Teste de Commit    
-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Flow | Passive Voice</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=1.47">
    <link rel="stylesheet" href="css/header.css?v=1.5">
</head>

<body>
    <div class="app-container">
        <div class="app-container">
            <!-- New Floating Sticky Header -->
            <header id="site-header" class="site-header">
                <div class="header-top">
                    <div class="container-flex">
                        <div class="logo">Grammar Flow üöÄ</div>
                        <div id="nav-placeholder"></div>
                    </div>
                </div>
                <div class="header-bottom">
                    <div class="container-flex toolbar-grid">
                        <!-- Level Select -->
                        <div class="toolbar-item level-select-wrapper">

                            <select id="level-select" class="header-level-select">
                                <option value="a1">A1 - Beginner</option>
                                <option value="a2" selected>A2 - Elementary</option>
                                <option value="b1">B1 - Intermediate</option>
                                <option value="b2">B2 - Advanced</option>
                                <option value="c1">C1 - Expert</option>
                            </select>
                        </div>

                        <!-- Search Bar -->
                        <div class="toolbar-item search-wrapper-header">
                            <input type="text" id="dashboard-search-input" class="header-search-input"
                                placeholder="üîç  Search topic..." autocomplete="off">
                            <div class="header-search-results" id="dashboard-search-results" style="display: none;">
                            </div>
                        </div>

                        <!-- Simple Progress (Summary) -->
                        <div class="toolbar-item progress-summary-header" id="dashboard-toggle-btn">
                            <span class="prog-label">Global Progress</span>
                            <div class="header-progress-track">
                                <div class="header-progress-fill" id="global-progress-bar"></div>
                            </div>
                            <span class="prog-text" id="global-percentage">0%</span>
                            <span class="chevron-icon" id="dashboard-chevron">+</span>
                        </div>
                    </div>

                    <!-- Expanded Dashboard Panel (Absolute/Dropdown) -->
                    <div class="header-dashboard-panel" id="dashboard-details-panel">
                        <div class="level-grid" id="level-progress-grid">
                            <!-- Cards injected by JS -->
                        </div>
                    </div>
                </div>
            </header>

            <!-- Spacer to prevent content hiding behind fixed header -->
            <div class="header-spacer"></div>

            <main class="content-area">
                <!-- New Topic Control Bar (Replacing old locations) -->
                <section class="quick-controls-bar">
                    <!-- 1. Topic Selector -->
                    <div class="control-block topic-block">
                        <div class="control-content">
                            <label for="topic-select" class="control-label">Current Topic</label>
                            <select id="topic-select" class="topic-select-large">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                    </div>

                    <!-- 2. Topic Mastery -->
                    <div class="control-block mastery-block">
                        <div class="mastery-info">
                            <span class="mastery-label">TOPIC MASTERY</span>
                            <div class="mastery-bar-track">
                                <div class="mastery-bar-fill" id="topic-percentage-bar"></div>
                            </div>
                            <span class="mastery-pct" id="topic-percentage">0%</span>
                            <span class="mastery-count" id="topic-count">0/0 Completed</span>
                        </div>
                        <!-- Reset Button (Compact) -->
                        <div class="reset-compact">
                            <button id="reset-menu-btn" class="reset-btn-compact" title="Reset Progress">üîÑ</button>
                            <div class="reset-menu" id="reset-menu">
                                <button data-reset="question">Current Question</button>
                                <button data-reset="level">Current Level</button>
                                <button data-reset="topic">Entire Topic</button>
                                <hr>
                                <button data-reset="all" class="danger">Reset All Progress</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Consolidated Lesson Dashboard -->
                <section class="lesson-card dashboard-card">
                    <div class="lesson-content">
                        <!-- Header removed from here -->
                        <div class="section-header-row">
                            <h2 class="section-title">Start Learning</h2>
                        </div>

                        <!-- Subtitle Only (Select moved up) -->
                        <div class="selection-container" style="justify-content: flex-start; margin-top: 0.5rem;">
                            <span class="teacher-mascot">üë®‚Äçüè´</span>
                            <p class="subtitle" id="lesson-subtitle" style="margin: 0;">Let's master the <strong>Present
                                    Continuous</strong>.</p>
                        </div>

                        <div class="quick-lesson" id="quick-lesson">
                            <!-- Content injected via JS -->
                        </div>
                    </div>
                </section>

                <!-- Challenge Section -->
                <section class="challenge-card">
                    <!-- Difficulty Tabs -->
                    <div class="difficulty-tabs">
                        <button class="diff-tab active" data-level="explorer" title="Beginner Exercises">üß≠
                            Explorer</button>
                        <button class="diff-tab" data-level="scholar" title="Intermediate Exercises">üìö Scholar</button>
                        <button class="diff-tab" data-level="specialist" title="Advanced Exercises">üß†
                            Specialist</button>
                        <button class="diff-tab" data-level="master" title="Expert Exercises">üëë Master</button>
                    </div>

                    <div class="challenge-header-row">
                        <div class="title-group">
                            <h2 id="challenge-title">Challenge #1</h2>

                            <div class="exercise-nav">
                                <select id="exercise-select" aria-label="Select Exercise"></select>
                                <span id="exercise-counter">of 0</span>
                            </div>

                            <div class="mode-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="mode-toggle-checkbox">
                                    <span class="slider round"></span>
                                </label>
                                <span class="mode-label">Type Mode</span>
                            </div>
                        </div>
                    </div>
                    <!-- Duplicate Next Button Removed -->
                    <p id="challenge-instruction">Transform the sentence below.</p>

                    <div class="original-sentence">
                        <span class="label">Original Sentence:</span>
                        <p id="original-text">"..." <span class="translation" id="original-translation">(...)</span></p>
                    </div>

                    <!-- Answer Area -->
                    <div class="construction-area">
                        <!-- Reset Button (Absolute) -->
                        <button id="reset-btn" class="reset-icon-btn" title="Reset">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M3 6h18" />
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                            </svg>
                        </button>

                        <!-- Logic Target for JS -->
                        <div id="drop-zone" class="drop-zone-content">
                            <!-- Placeholder and words injected by JS -->
                        </div>

                        <!-- Typing Input -->
                        <textarea id="type-input" class="type-input" placeholder="Type your answer here..." rows="2"
                            style="display: none;"></textarea>
                    </div>

                    <!-- Word Bank -->
                    <div class="words-container" id="word-bank">
                        <!-- Words injected by JS -->
                    </div>

                    <!-- Feedback Area -->
                    <div id="feedback-area" class="feedback-message hidden"></div>

                    <!-- Control Buttons -->
                    <div class="control-buttons">
                        <div class="left-controls">
                            <button id="check-btn" class="btn-primary">Check Answer</button>
                            <button id="next-btn" class="btn-secondary" disabled>Next</button>
                        </div>
                        <div class="right-controls">
                            <button id="hint-btn" class="btn-text">
                                Hint <span class="icon">üí°</span>
                            </button>
                            <button id="show-answer-btn" class="btn-text">
                                Show Answer <span class="icon">üëÄ</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Notes Section -->
                <section class="notes-card">
                    <div class="notes-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <h3>My Study Notes <span id="save-status" class="save-status">Saved</span></h3>
                        <!-- Notes Clear Options -->
                        <div class="reset-dropdown" style="position: relative;">
                            <button id="notes-clear-menu-btn" class="secondary-btn" title="Clear options"
                                style="font-size: 0.8rem; padding: 0.2rem 0.5rem;">Clear...</button>
                            <div id="notes-clear-menu" class="reset-menu">
                                <button data-clear-notes="topic">Clear This Topic</button>
                                <button data-clear-notes="all" style="color: var(--error);">Clear All Notes</button>
                            </div>
                        </div>
                    </div>
                    <textarea id="study-notes" class="notes-area"
                        placeholder="Write your notes here... (Auto-saved)"></textarea>
                </section>
            </main>
        </div>
        <script src="js/script.js?v=1.28"></script>
        <script src="js/scroll_top.js"></script>
        <script src="js/nav.js"></script>
</body>

</html>